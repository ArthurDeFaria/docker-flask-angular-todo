:host, html, body {
  height: 100%;
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 1.5rem;
  box-sizing: border-box;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color: var(--text-color);
  background: var(--background-color);
  min-height: 100vh;
}

/* Grid: tarefas + tags */
.dashboard-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.5rem;
}

@media (min-width: 992px) {
  .dashboard-grid {
    grid-template-columns: 2fr 1fr;
  }
}

/* Cards */
.card {
  background: var(--card-background);
  border-radius: 8px;
  padding: 1.2rem;
  box-shadow: 0 6px 18px rgba(12, 20, 30, 0.04);
  border: 1px solid var(--card-border-color);
}

/* Headings */
h1 { margin: 0 0 1rem 0; color: var(--text-color); }
h2 { margin: 0 0 .75rem 0; font-size: 1.1rem; color: var(--text-color); }

.main-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}

/* ---------------------------
   Botões (reaproveitados no HTML)
   --------------------------- */
.btn {
  padding: .6rem .9rem;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  font-size: .95rem;
}

.btn-primary {
  background: var(--primary-color);
  color: #fff;
}
.btn-primary:hover { filter: brightness(.95); }

.btn-secondary {
  background: var(--secondary-color);
  color: #fff;
}
.btn-secondary:hover { filter: brightness(.95); }

.btn-danger {
  background: #dc3545;
  color: #fff;
}
.btn-danger:hover { filter: brightness(.95); }

.btn-full-width {
  width: 100%;
  padding: 1rem;
  font-size: 1rem;
}

/* ---------------------------
   Mensagem de erro
   --------------------------- */
.error-box {
  background: #fff3f2;
  color: #7b1919;
  border: 1px solid #ffd2d2;
  padding: .9rem;
  border-radius: 6px;
  margin-bottom: 1rem;
}

/* ---------------------------
   Task card e conteúdo
   --------------------------- */
.task-card {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
  justify-content: space-between;
  padding: .9rem;
  border-radius: 8px;
  border: 1px solid var(--card-border-color);
  margin-bottom: .9rem;
  background: var(--card-background);
  box-sizing: border-box;
}

.task-card.completed { background: var(--card-background); opacity: .95; }

.task-content {
  flex: 1;
  min-width: 0;
}

.task-content h3 {
  margin: 0;
  font-size: 1rem;
  font-weight: 700;
  color: var(--text-color);
}

.task-content p {
  margin: .35rem 0 0 0;
  color: var(--text-color);
  font-size: .92rem;
  opacity: 0.8;
}

/* line-through for completed */
.task-card.completed .task-content h3,
.task-card.completed .task-content p {
  text-decoration: line-through;
  opacity: .7;
}

/* ---------------------------
   Tags
   --------------------------- */
.tags-container {
  display:flex;
  gap: .45rem;
  flex-wrap: wrap;
  margin-top: .6rem;
}

.tag {
  display:inline-flex;
  align-items:center;
  gap:.4rem;
  background:var(--tag-background);
  color:var(--tag-text-color);
  padding:.25rem .6rem;
  border-radius: 999px;
  font-size:.78rem;
  font-weight:600;
}

.btn-remove-tag {
  background:transparent;
  border:none;
  cursor:pointer;
  font-weight:700;
  color: var(--tag-remove-color);
  padding:0 0 0 .35rem;
  line-height:1;
}
.btn-remove-tag:hover { color:#dc3545; }

/* ---------------------------
   Menu de três pontinhos
   --------------------------- */
.task-menu-wrapper { position: relative; flex-shrink: 0; }

.menu-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 20px;
  line-height: 1;
  padding: 6px;
  color: var(--text-color);
}
.menu-btn:hover { color: var(--primary-color); }

.task-menu {
  position: absolute;
  right: 0;
  top: 32px;
  width: 200px;
  background: var(--card-background);
  border-radius: 8px;
  border: 1px solid var(--card-border-color);
  box-shadow: 0 8px 30px rgba(2,6,23,0.08);
  z-index: 1000;
  padding: 6px 0;
  list-style: none;
  margin: 0;
}
.task-menu li {
  padding: .6rem 1rem;
  cursor: pointer;
  font-size:.95rem;
  color: var(--text-color);
}
.task-menu li:hover { background: var(--background-color); }

/* special container for add tag select inside menu */
.add-tag-container { padding: .5rem 1rem; display:flex; flex-direction: column; gap:.4rem; }
.add-tag-select { padding:.4rem; font-size:.9rem; border-radius:6px; }

/* ---------------------------
   Subtasks (sempre expandidas)
   --------------------------- */
.subtasks-container {
  margin-top: .8rem;
  padding-left: 1rem;
  border-left: 3px dashed var(--card-border-color);
  display:flex;
  flex-direction: column;
  gap: .6rem;
}

.subtask-card {
  display:flex;
  gap:.8rem;
  align-items:flex-start;
  justify-content: space-between;
  padding:.6rem;
  border-radius:8px;
  border: 1px solid var(--card-border-color);
  background: var(--background-color);
}

.subtask-card .subtask-content { flex:1; min-width:0; }
.subtask-card h4 { margin:0; font-size:.95rem; font-weight:700; color: var(--text-color); }
.subtask-card p { margin:.25rem 0 0 0; color: var(--text-color); font-size:.86rem; opacity: 0.8;}

.btn-delete-subtask {
  background:transparent;
  border:none;
  cursor:pointer;
  color:var(--text-color);
  font-size:18px;
}
.btn-delete-subtask:hover { color:#b91c1c; }

/* ---------------------------
   Modal (usado por task/tag/subtask/delete)
   --------------------------- */
.modal-overlay {
  position: fixed;
  inset: 0;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(2,6,23,0.45);
  z-index: 2000;
  padding: 1rem;
  box-sizing: border-box;
}

.modal-content {
  width:100%;
  max-width:520px;
  background:var(--card-background);
  border-radius:10px;
  padding:1.25rem;
  box-shadow: 0 10px 30px rgba(2,6,23,0.12);
}

.modal-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:.75rem;
  border-bottom: 1px solid var(--card-border-color);
  padding-bottom:.6rem;
}
.modal-header h2 { margin:0; font-size:1.05rem; color: var(--text-color); }

.modal-close-btn {
  background:transparent;
  border:none;
  font-size:22px;
  line-height:1;
  cursor:pointer;
  color: var(--text-color);
}
.modal-close-btn:hover { color:var(--primary-color); }

.form-vertical { display:flex; flex-direction:column; gap:.8rem; }
.form-group { display:flex; flex-direction:column; gap:.4rem; }
.form-group label { font-weight:600; font-size:.9rem; color:var(--text-color); }

input[type="text"], textarea, select {
  padding:.7rem;
  font-size:.95rem;
  border-radius:8px;
  border:1px solid var(--input-border-color);
  box-sizing:border-box;
  background: var(--input-background);
  color: var(--text-color);
}
textarea { min-height:100px; resize:vertical; }

/* Modal actions reuse
   note: btn-cancel and btn-delete classes used in the modals markup */
.modal-actions {
  display:flex;
  justify-content:flex-end;
  gap:.6rem;
  padding-top:.5rem;
  border-top: 1px solid var(--card-border-color);
}
.btn-cancel { background:var(--background-color); color:var(--text-color); padding:.55rem .9rem; border-radius:6px; border:none; cursor:pointer; }
.btn-delete { background:#ef4444; color:#fff; padding:.55rem .9rem; border-radius:6px; border:none; cursor:pointer; }
.btn-cancel:hover { filter:brightness(.98); } .btn-delete:hover { filter:brightness(.95); }

/* ---------------------------
   Modal de Confirmação (Excluir)
   --------------------------- */

.modal.modal-confirm {
  width: 100%;
  max-width: 420px;
  background: var(--card-background);
  border-radius: 12px;
  padding: 22px;
  text-align: center;
  box-shadow: 0 12px 36px rgba(2,6,23,0.18);
  border: 1px solid var(--card-border-color);
}

.modal.modal-confirm .modal-title,
.modal.modal-confirm h3 {
  font-size: 1.125rem;
  margin: 0 0 8px 0;
  color: var(--text-color);
  font-weight: 700;
}

.modal.modal-confirm .modal-message {
  font-size: .95rem;
  color: var(--text-color);
  margin: 0 0 18px 0;
  line-height: 1.3;
  opacity: 0.9;
}

/* Actions area already uses .modal-actions, but we give slightly different spacing here */
.modal.modal-confirm .modal-actions {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 8px;
  padding-top: 12px;
  border-top: 1px solid var(--card-border-color);
}

/* Reuse existing btn-cancel and btn-delete styles, but ensure size & radius */
.btn-cancel, .btn-delete {
  padding: 10px 18px;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
  border: none;
  font-size: .95rem;
}

/* cancel (light) */
.btn-cancel {
  background: var(--background-color);
  color: var(--text-color);
}
.btn-cancel:hover { filter: brightness(.98); }

/* destructive */
.btn-delete {
  background: #ef4444;
  color: #fff;
}
.btn-delete:hover { filter: brightness(.95); }

/* small responsive tweak */
@media (max-width: 420px) {
  .modal.modal-confirm { padding: 16px; }
  .modal.modal-confirm .modal-actions { gap: 8px; flex-direction: row; }
}

.right-column {
  display: flex;
  flex-direction: column;
  gap: 1.5rem; /* Adjust as needed */
}

.tasks-column {
  display: flex;
  flex-direction: column;
  gap: 1.5rem; /* Adjust as needed */
}

/* ---------------------------
   Tags column specific small tweaks
   --------------------------- */
.tags-list-title { margin-top: .75rem; font-weight:700; }

/* ---------------------------
   Small screens tweaks
   --------------------------- */
@media (max-width: 600px) {
  .task-card { flex-direction: column; align-items: stretch; }
  .task-menu { right: 8px; left: auto; top: 40px; width: 160px; }
}

/* ---------------------------
   Barra de Progresso
   --------------------------- */
.progress-bar-container {
  position: relative;
  width: 100%;
  height: 16px;
  background-color: var(--input-background);
  border-radius: 8px;
  margin-top: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.progress-bar {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  background-color: var(--primary-color);
  border-radius: 8px;
  transition: width 0.3s ease-in-out;
}

.progress-percentage {
  position: relative;
  z-index: 1;
  font-size: 0.7rem;
  font-weight: 600;
  color: #ffffff;
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
}

/* ---------------------------
   Checkbox customizada para subtasks
   --------------------------- */
.subtask-card.completed .task-content h4,
.subtask-card.completed .task-content p {
  text-decoration: line-through;
  opacity: 0.6;
}

.custom-checkbox {
  position: relative;
  display: inline-block;
  width: 20px;
  height: 20px;
  cursor: pointer;
  flex-shrink: 0;
}

.custom-checkbox input {
  opacity: 0;
  width: 0;
  height: 0;
}

.checkmark {
  position: absolute;
  top: 0;
  left: 0;
  height: 20px;
  width: 20px;
  background-color: var(--input-background);
  border: 1px solid var(--input-border-color);
  border-radius: 4px;
  transition: background-color 0.2s;
}

.custom-checkbox:hover input ~ .checkmark {
  background-color: var(--background-color);
}

.custom-checkbox input:checked ~ .checkmark {
  background-color: var(--primary-color);
  border-color: var(--primary-color);
}

.checkmark:after {
  content: "";
  position: absolute;
  display: none;
}

.custom-checkbox input:checked ~ .checkmark:after {
  display: block;
}

.custom-checkbox .checkmark:after {
  left: 7px;
  top: 3px;
  width: 5px;
  height: 10px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

/* ---------------------------
   Drag Handle
   --------------------------- */

.drag-handle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  cursor: grab;
  color: #9ca3af; /* Same as the SVG stroke */
}

.cdk-drag-preview {
  cursor: grabbing;
}

.cdk-drag-placeholder {
  opacity: 0;
}

.cdk-drop-list-dragging .task-card:not(.cdk-drag-placeholder) {
  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
}
